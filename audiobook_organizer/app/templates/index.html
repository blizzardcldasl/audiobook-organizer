<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Audiobook Organizer</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
    <h1>Audiobook Organizer</h1>
    <div id="progress">
        <p>Total files: <span id="total">0</span></p>
        <p>Processed files: <span id="processed">0</span></p>
        <p>Current file: <span id="current_file"></span></p>
        <p>Metadata: <span id="current_metadata"></span></p>
    </div>
    <button id="accept">Accept</button>
    <button id="deny">Deny</button>
    
    <script>
        function updateProgress() {
            $.get("/progress", function(data) {
                $("#total").text(data.progress.total);
                $("#processed").text(data.progress.processed);
                $("#current_file").text(data.progress.current_file);
                $("#current_metadata").text(JSON.stringify(data.progress.current_metadata));
            });
        }

        $("#accept").click(function() {
            $.post("/action", JSON.stringify({action: "accept"}), function(data) {
                updateProgress();
            }, "json");
        });

        $("#deny").click(function() {
            $.post("/action", JSON.stringify({action: "deny"}), function(data) {
                updateProgress();
            }, "json");
        });

        setInterval(updateProgress, 1000);
    </script>
</body>
</html>
